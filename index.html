<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Troop Originals</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"/>
  <style>
    body { margin: 0; background: #111; color: white; font-family: sans-serif; }
    .header {
      display: flex; justify-content: space-between; align-items: center;
      background: #000; padding: 10px 15px;
    }
    .header img { height: 40px; }
    .header .menu, .header .search {
      font-size: 24px; color: white; cursor: pointer;
    }
    .swiper { width: 100%; height: 220px; }
    .swiper-slide { position: relative; border-radius: 8px; overflow: hidden; }
    .swiper-slide img { width: 100%; height: 100%; object-fit: cover; }
    .slide-title {
      position: absolute; bottom: 40px; left: 10px; font-size: 18px;
      font-weight: bold; color: white; text-shadow: 0 0 5px black;
    }
    .slide-year {
      position: absolute; bottom: 20px; left: 10px; font-size: 14px; color: #ccc;
    }
    .slide-type {
      position: absolute; bottom: 20px; right: 10px; background: #2196F3;
      padding: 2px 8px; font-size: 12px; border-radius: 3px; color: white;
    }
    .section-title {
      margin: 20px 15px 10px; font-size: 20px; font-weight: bold;
      border-left: 4px solid #2196F3; padding-left: 10px;
    }
    .featured-row {
      display: flex; overflow-x: auto; padding: 0 10px; gap: 10px;
    }
    .featured-card {
      background: #222; flex: 0 0 auto; width: 120px; border-radius: 8px;
      overflow: hidden; position: relative; cursor: pointer;
    }
    .featured-card img {
      width: 100%; height: 160px; object-fit: cover;
    }
    .featured-badge {
      position: absolute; top: 5px; left: 5px; background: green;
      color: white; font-size: 10px; padding: 2px 5px; border-radius: 3px;
    }
    .featured-title {
      padding: 5px 6px; font-size: 14px; font-style: italic;
    }
    .grid-container {
      display: grid; grid-template-columns: repeat(3, 1fr);
      gap: 12px; padding: 20px 10px 40px;
    }
    .grid-card {
      background: #222; border-radius: 8px; overflow: hidden; cursor: pointer;
    }
    .grid-card img {
      width: 100%; height: 180px; object-fit: cover;
    }
    .grid-card .info {
      padding: 6px 8px; font-size: 14px;
    }
  </style>
</head>
<body>

  <div class="header">
    <div class="menu" onclick="location.href='login.html'">&#9776;</div>
    <img src="https://i.imgur.com/dSU3Ysp.png" alt="Troop Originals">
    <div class="search">&#128269;</div>
  </div>

  <div class="swiper">
    <div class="swiper-wrapper" id="swiper-slides"></div>
    <div class="swiper-pagination"></div>
  </div>

  <div class="section-title">Featured Titles</div>
  <div class="featured-row" id="featured-row"></div>

  <div class="section-title">All Titles</div>
  <div class="grid-container" id="grid-container"></div>

  <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
  <script>
    const movies = JSON.parse(localStorage.getItem("movies") || "[]");

    const swiperWrapper = document.getElementById("swiper-slides");
    const featuredRow = document.getElementById("featured-row");
    const grid = document.getElementById("grid-container");

    movies.forEach(movie => {
      // Slider
      const slide = document.createElement("div");
      slide.className = "swiper-slide";
      slide.innerHTML = `
        <img src="${movie.poster}" />
        <div class="slide-title">${movie.title}</div>
        <div class="slide-year">${movie.year}</div>
        <div class="slide-type">${movie.type}</div>
      `;
      slide.onclick = () => location.href = `player.html?url=${encodeURIComponent(movie.url)}`;
      swiperWrapper.appendChild(slide);

      // Featured
      const card = document.createElement("div");
      card.className = "featured-card";
      card.innerHTML = `
        <img src="${movie.poster}" />
        <div class="featured-badge">FEATURED</div>
        <div class="featured-title">${movie.title}</div>
      `;
      card.onclick = () => location.href = `player.html?url=${encodeURIComponent(movie.url)}`;
      featuredRow.appendChild(card);

      // Grid
      const item = document.createElement("div");
      item.className = "grid-card";
      item.innerHTML = `
        <img src="${movie.poster}" />
        <div class="info">${movie.title} (${movie.year})</div>
      `;
      item.onclick = () => location.href = `player.html?url=${encodeURIComponent(movie.url)}`;
      grid.appendChild(item);
    });

    new Swiper(".swiper", {
      loop: true,
      autoplay: { delay: 3000 },
      pagination: { el: ".swiper-pagination" }
    });
  </script>
</body>
</html>
